---
title: "Introduction to time series"
output: html_notebook
---

```{r}
library(tsibble)
library(tsibbledata)
library(feasts)
library(fable)
```

```{r}
head(vic_elec)
```
```{r}
index_var(vic_elec)
key_vars(vic_elec)
interval(vic_elec)
```

```{r}
index_var(nyc_bikes)
key_vars(nyc_bikes)

```

```{r}
vic_elec %>% 
  select(Demand, Temperature)

# will always have Time 
```

```{r}
vic_elec %>%
  filter_index("2012-01")
```

```{r}
vic_year <- vic_elec %>% 
  mutate(year = lubridate::year(Date))
```

```{r}
 vic_year %>% 
  group_by(year) %>% 
  summarise(mean_temp = mean(Temperature))
```

```{r}
 vic_year %>% 
  index_by(year) %>% 
  summarise(mean_temp = mean(Temperature))
```

Make plots

```{r}
vic_elec %>% 
  filter(Holiday == FALSE) %>% 
  ggplot() +
  aes(x = Time, y = Temperature) +
  geom_line()
```

```{r}
elec_date <- vic_elec %>% 
  index_by(Date) %>% 
  summarise(mean_temp = mean(Temperature))

elec_date %>% 
  ggplot() +
  aes(x = Date, y = mean_temp) +
  geom_line()
```

### Task 2 mins -

Make the same plot, but for monthly aggregated data

```{r}
vic_elec %>%
  mutate(month = month(Date)) %>% 
  index_by(month) %>% 
  summarise(mean_temp = mean(Temperature)) %>% 
  ggplot(aes(x = month, y = mean_temp)) +
  geom_line()
```

```{r}
vic_elec %>%
  mutate(month = month(Date, label = TRUE)) %>% 
  index_by(month) %>% 
  summarise(mean_temp = mean(Temperature)) %>% 
  ggplot(aes(x = month, y = mean_temp)) +
  geom_point() +
  geom_line(group = 1)
```



